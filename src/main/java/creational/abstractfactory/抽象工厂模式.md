# 抽象工厂模式

**抽象工厂模式 Abstract Factory Pattern**： 提供一个创建一系列相关或相互依赖对象的接口，
而无须指定它们具体的类。

又称为**工具 Kit** 模式，是一种对象创建型模式。

# 结构

每个具体工厂都提供多个工厂方法用于产生不同类型的产品，这些产品构成一个产品族。

- AbstractFactory 抽象工厂：声明一组用于创建一族产品的方法
- ConcreteFactory 具体工厂：实现抽象工厂中声明的方法
- AbstractProduct 抽象产品：为每种产品声明接口，声明业务方法
- ConcreteProduct 具体产品：定义具体产品对象，实现业务方法

# 特性：开闭原则倾斜

在抽象工厂模式中，增加新的产品族很方便，只需要提供具体产品和工厂；
但增加新的产品等级结构很复杂，需要修改抽象工厂，然后修改每个工厂中的具体方法，最后修改客户端代码，这违反了开闭原则。

以上特质称为开闭原则的倾斜性。

# 优缺点/适用环境

## 优点

- 隔离了具体类的生成，更换具体工厂很容易。只需要改变具体工厂的实例就可以在某种程度上改变整个软件系统行为。
- 一个产品族的多个对象被设计成一起工作时，能保证客户端始终只使用同一个产品族中的对象
- 增加新的产品族很方便，无需修改已有系统，符合开闭原则

## 缺点

增加新的产品等级结构很麻烦，需要对现有系统进行较大的修改，甚至修改抽象层代码

## 适用环境

1. 一个系统不应当依赖产品类实例如何和创建、组合和表达的细节。
2. 系统中有多于一个的产品族，而每次只使用其中某一产品族。
3. 属于同一个产品族的产品将在一起使用
4. 产品等级结构稳定

# 本例

开发一套界面皮肤库，通过菜单选择皮肤，不同皮肤可提供不同视觉效果的控件。

## 分析

- 创建抽象工厂、抽象产品类（按钮、文本框、下拉框）
- 创建具体产品，包括两种产品族：春季、夏季，三种产品等级结构：按钮、文本框、下拉框
- 创建两种产品族对应的具体工厂
- 使用反射生成具体工厂，调用业务方法



