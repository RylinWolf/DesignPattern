# 外观模式

**外观模式 Facade Pattern**：为子系统的一组接口提供一个统一的入口。外观模式定义了一个高层接口，这个接口使得这一子系统更加容易使用。

又称为门面模式，是一种对象结构型模式。
是迪米特法则的一种具体实现，通过引入一个新的外观角色，降低原有系统的复杂度，降低客户类与子系统的耦合度。

主要目的在于降低系统的复杂程度，降低类与类之间的耦合关系。
引入外观模式后，增加新的或移除子系统都非常方便，客户类无需修改，只需在外观类中增加或移除引用即可。
从这方面说，外观模式一定程度上不符合开闭原则，增加新的子系统需要对原有系统进行一定修改。

# 结构

- Facade 外观角色：在客户端可以调用它的方法，外观角色可以知道相关的一个或多个子系统的功能和责任。
- SubSystem 子系统角色：软件系统中可以有一个或多个子系统角色，每个子系统可以不是一个单独的类，而是一个类的集合。
  子系统可以被客户端或外观角色调用，子系统不知道外观的存在，对于子系统而言，外观仅是另一个客户端而已。

# 抽象外观类

通过引入抽象外观类可以一定程度解决违背开闭原则的问题。
对于新的业务需求，不需要修改原有外观类，而对应增加一个新的具体外观类，由新的外观类关联新的子系统对象，通过配置文件指定使用具体外观类。

示例位于 `abstractfacade` 包下。

# 优缺点/适用环境

## 优点

- 对客户端屏蔽了子系统组件，客户端代码将更简单， 与之关联的对象也变少
- 实现了子系统与客户端之间的松耦合关系
- 一个子系统修改对其他子系统没有任何影响，子系统内部变化也不会影响到外观对象

## 缺点

- 不能很好地限制客户端直接使用子系统类，做太多限制则减少了灵活性
- 如果设计不当，增加新的子系统可能需要修改外观类源码，违背开闭原则

## 适用环境

- 要为访问一系列复杂的子系统提供一个简单入口时
- 客户端程序与多个子系统之间存在很大的依赖性
- 在层次化结构中可以使用外观模式定义系统中每一层的入口，降低层之间的耦合度

# 本例

开发一个可应用于多个软件的文件加密模块，该模块可对文件数据进行加密并存储在新文件中。
具体流程包括三个部分，分别是读取源文件、加密、保存加密后文件。其中读取文件和保存文件使用流实现，加密通过求模运算实现。
这三个操作相对独立，分别封装在三个类中。

使用外观模式设计该文件加密模块。

## 分析

- 分别创建子系统：加密器 CipherMachine, 文件读取器 FileReader, 文件写入器 FileWriter
- 创建外观类：EncryptFacade，外观类中维护对子系统的引用，实现用于实现文件加密的方法
- 创建客户端，创建外观类实例，通过外观类调用业务方法实现功能
